!function e(t,n,r){function i(s,a){if(!n[s]){if(!t[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return i(n?n:e)},l,l.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){"use strict";e("./src/lib/polyfills");var r=e("./src/setup"),i=e("./src/options"),o=e("./src/api"),s=e("./src/lib/types"),a=function(e){e=i(e);var t={options:e},n=o(t);t.api=n;var a=r(t);return n.addTo=a.addTo,n.remove=a.remove,n.types=s,n.options=e,n};t.exports=a,window.mapboxgl=window.mapboxgl||{},window.mapboxgl.Draw=a},{"./src/api":13,"./src/lib/polyfills":34,"./src/lib/types":40,"./src/options":46,"./src/setup":48}],2:[function(e,t,n){},{}],3:[function(e,t,n){(function(e){function t(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(e){return i.exec(e).slice(1)};n.resolve=function(){for(var n="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var s=o>=0?arguments[o]:e.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(n=s+"/"+n,i="/"===s.charAt(0))}return n=t(r(n.split("/"),function(e){return!!e}),!i).join("/"),(i?"/":"")+n||"."},n.normalize=function(e){var i=n.isAbsolute(e),o="/"===s(e,-1);return e=t(r(e.split("/"),function(e){return!!e}),!i).join("/"),e||i||(e="."),e&&o&&(e+="/"),(i?"/":"")+e},n.isAbsolute=function(e){return"/"===e.charAt(0)},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(r(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},n.relative=function(e,t){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=n.resolve(e).substr(1),t=n.resolve(t).substr(1);for(var i=r(e.split("/")),o=r(t.split("/")),s=Math.min(i.length,o.length),a=s,c=0;s>c;c++)if(i[c]!==o[c]){a=c;break}for(var u=[],c=a;c<i.length;c++)u.push("..");return u=u.concat(o.slice(a)),u.join("/")},n.sep="/",n.delimiter=":",n.dirname=function(e){var t=o(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},n.basename=function(e,t){var n=o(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},n.extname=function(e){return o(e)[3]};var s="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return 0>t&&(t=e.length+t),e.substr(t,n)}}).call(this,e("_process"))},{_process:4}],4:[function(e,t,n){function r(){d&&l&&(d=!1,l.length?p=l.concat(p):f=-1,p.length&&i())}function i(){if(!d){var e=a(r);d=!0;for(var t=p.length;t;){for(l=p,p=[];++f<t;)l&&l[f].run();f=-1,t=p.length}l=null,d=!1,c(e)}}function o(e,t){this.fun=e,this.array=t}function s(){}var a,c,u=t.exports={};!function(){try{a=setTimeout}catch(e){a=function(){throw new Error("setTimeout is not defined")}}try{c=clearTimeout}catch(e){c=function(){throw new Error("clearTimeout is not defined")}}}();var l,p=[],d=!1,f=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new o(e,t)),1!==p.length||d||a(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=s,u.addListener=s,u.once=s,u.off=s,u.removeListener=s,u.removeAllListeners=s,u.emit=s,u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],5:[function(e,t,n){function r(e,t){var n,r=[];if("object"==typeof e)n=e;else{if("string"!=typeof e)return[{message:"Expected string or object as input",line:0}];try{n=i.parse(e)}catch(s){var a=s.message.match(/line (\d+)/),c=parseInt(a[1],10);return[{line:c-1,message:s.message,error:s}]}}return r=r.concat(o.hint(n,t))}var i=e("jsonlint-lines"),o=e("./object");t.exports.hint=r},{"./object":7,"jsonlint-lines":6}],6:[function(e,t,n){(function(r){var i=function(){function e(){this.yy={}}var t=function(e,t,n,r){for(n=n||{},r=e.length;r--;n[e[r]]=t);return n},n=[1,12],r=[1,13],i=[1,9],o=[1,10],s=[1,11],a=[1,14],c=[1,15],u=[14,18,22,24],l=[18,22],p=[22,24],d={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(e,t,n,r,i,o,s){var a=o.length-1;switch(i){case 1:this.$=e.replace(/\\(\\|")/g,"$1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\v/g,"\x0B").replace(/\\f/g,"\f").replace(/\\b/g,"\b");break;case 2:this.$=Number(e);break;case 3:this.$=null;break;case 4:this.$=!0;break;case 5:this.$=!1;break;case 6:return this.$=o[a-1];case 13:this.$={},Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 14:case 19:this.$=o[a-1],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 15:this.$=[o[a-2],o[a]];break;case 16:this.$={},this.$[o[a][0]]=o[a][1];break;case 17:this.$=o[a-2],void 0!==o[a-2][o[a][0]]&&(this.$.__duplicateProperties__||Object.defineProperty(this.$,"__duplicateProperties__",{value:[],enumerable:!1}),this.$.__duplicateProperties__.push(o[a][0])),o[a-2][o[a][0]]=o[a][1];break;case 18:this.$=[],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 20:this.$=[o[a]];break;case 21:this.$=o[a-2],o[a-2].push(o[a])}},table:[{3:5,4:n,5:6,6:r,7:3,8:i,9:4,10:o,11:s,12:1,13:2,15:7,16:8,17:a,23:c},{1:[3]},{14:[1,16]},t(u,[2,7]),t(u,[2,8]),t(u,[2,9]),t(u,[2,10]),t(u,[2,11]),t(u,[2,12]),t(u,[2,3]),t(u,[2,4]),t(u,[2,5]),t([14,18,21,22,24],[2,1]),t(u,[2,2]),{3:20,4:n,18:[1,17],19:18,20:19},{3:5,4:n,5:6,6:r,7:3,8:i,9:4,10:o,11:s,13:23,15:7,16:8,17:a,23:c,24:[1,21],25:22},{1:[2,6]},t(u,[2,13]),{18:[1,24],22:[1,25]},t(l,[2,16]),{21:[1,26]},t(u,[2,18]),{22:[1,28],24:[1,27]},t(p,[2,20]),t(u,[2,14]),{3:20,4:n,20:29},{3:5,4:n,5:6,6:r,7:3,8:i,9:4,10:o,11:s,13:30,15:7,16:8,17:a,23:c},t(u,[2,19]),{3:5,4:n,5:6,6:r,7:3,8:i,9:4,10:o,11:s,13:31,15:7,16:8,17:a,23:c},t(l,[2,17]),t(l,[2,15]),t(p,[2,21])],defaultActions:{16:[2,6]},parseError:function(e,t){function n(e,t){this.message=e,this.hash=t}if(!t.recoverable)throw n.prototype=Error,new n(e,t);this.trace(e)},parse:function(e){var t=this,n=[0],r=[null],i=[],o=this.table,s="",a=0,c=0,u=0,l=2,p=1,d=i.slice.call(arguments,1),f=Object.create(this.lexer),h={yy:{}};for(var y in this.yy)Object.prototype.hasOwnProperty.call(this.yy,y)&&(h.yy[y]=this.yy[y]);f.setInput(e,h.yy),h.yy.lexer=f,h.yy.parser=this,"undefined"==typeof f.yylloc&&(f.yylloc={});var g=f.yylloc;i.push(g);var m=f.options&&f.options.ranges;"function"==typeof h.yy.parseError?this.parseError=h.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var v,_,b,x,w,k,S,C,L,E=function(){var e;return e=f.lex()||p,"number"!=typeof e&&(e=t.symbols_[e]||e),e},O={};;){if(b=n[n.length-1],this.defaultActions[b]?x=this.defaultActions[b]:(null!==v&&"undefined"!=typeof v||(v=E()),x=o[b]&&o[b][v]),"undefined"==typeof x||!x.length||!x[0]){var I="";L=[];for(k in o[b])this.terminals_[k]&&k>l&&L.push("'"+this.terminals_[k]+"'");I=f.showPosition?"Parse error on line "+(a+1)+":\n"+f.showPosition()+"\nExpecting "+L.join(", ")+", got '"+(this.terminals_[v]||v)+"'":"Parse error on line "+(a+1)+": Unexpected "+(v==p?"end of input":"'"+(this.terminals_[v]||v)+"'"),this.parseError(I,{text:f.match,token:this.terminals_[v]||v,line:f.yylineno,loc:g,expected:L})}if(x[0]instanceof Array&&x.length>1)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+v);switch(x[0]){case 1:n.push(v),r.push(f.yytext),i.push(f.yylloc),n.push(x[1]),v=null,_?(v=_,_=null):(c=f.yyleng,s=f.yytext,a=f.yylineno,g=f.yylloc,u>0&&u--);break;case 2:if(S=this.productions_[x[1]][1],O.$=r[r.length-S],O._$={first_line:i[i.length-(S||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(S||1)].first_column,last_column:i[i.length-1].last_column},m&&(O._$.range=[i[i.length-(S||1)].range[0],i[i.length-1].range[1]]),w=this.performAction.apply(O,[s,c,a,h.yy,x[1],r,i].concat(d)),"undefined"!=typeof w)return w;S&&(n=n.slice(0,-1*S*2),r=r.slice(0,-1*S),i=i.slice(0,-1*S)),n.push(this.productions_[x[1]][0]),r.push(O.$),i.push(O._$),C=o[n[n.length-2]][n[n.length-1]],n.push(C);break;case 3:return!0}}return!0}},f=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var n,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),r=e[0].match(/(?:\r\n?|\n).*/g),r&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],n=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var o in i)this[o]=i[o];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,r;this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),o=0;o<i.length;o++)if(n=this._input.match(this.rules[i[o]]),n&&(!t||n[0].length>t[0].length)){if(t=n,r=o,this.options.backtrack_lexer){if(e=this.test_match(n,i[o]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?(e=this.test_match(t,i[r]),e!==!1?e:!1):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){var e=this.conditionStack.length-1;return e>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return e=this.conditionStack.length-1-Math.abs(e||0),e>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(e,t,n,r){switch(n){case 0:break;case 1:return 6;case 2:return t.yytext=t.yytext.substr(1,t.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt\/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};return e}();return d.lexer=f,e.prototype=d,d.Parser=e,new e}();"undefined"!=typeof e&&"undefined"!=typeof n&&(n.parser=i,n.Parser=i.Parser,n.parse=function(){return i.parse.apply(i,arguments)},n.main=function(t){t[1]||(console.log("Usage: "+t[0]+" FILE"),r.exit(1));var i=e("fs").readFileSync(e("path").normalize(t[1]),"utf8");return n.parser.parse(i)},"undefined"!=typeof t&&e.main===t&&n.main(r.argv.slice(1)))}).call(this,e("_process"))},{_process:4,fs:2,path:3}],7:[function(e,t,n){function r(e,t){function n(e){t&&t.noDuplicateMembers===!1||!e.__duplicateProperties__||v.push({message:"An object contained duplicate members, making parsing ambigous: "+e.__duplicateProperties__.join(", "),line:e.__line__}),e.type?_[e.type]?_[e.type](e):v.push({message:"The type "+e.type+" is unknown",line:e.__line__}):v.push({message:"The type property is required and was not found",line:e.__line__})}function r(e,t){return e.every(function(e){return null!==e&&typeof e===t})}function i(e,t,n){if("undefined"==typeof e[t])return v.push({message:'"'+t+'" property required',line:e.__line__});if("array"===n){if(!Array.isArray(e[t]))return v.push({message:'"'+t+'" property should be an array, but is an '+typeof e[t]+" instead",line:e.__line__})}else if(n&&typeof e[t]!==n)return v.push({message:'"'+t+'" property should be '+n+", but is an "+typeof e[t]+" instead",line:e.__line__})}function o(e){if(c(e),u(e),!i(e,"features","array")){if(!r(e.features,"object"))return v.push({message:"Every feature must be an object",line:e.__line__});e.features.forEach(m)}}function s(e,t){return Array.isArray(e)?e.length<2?v.push({message:"position must have 2 or more elements",line:e.__line__||t}):r(e,"number")?void 0:v.push({message:"each element in a position must be a number",line:e.__line__||t}):v.push({message:"position should be an array, is a "+typeof e+" instead",line:e.__line__||t})}function a(e,t,n,r){if(void 0===r&&void 0!==e.__line__&&(r=e.__line__),0===n)return s(e,r);if(1===n&&t)if("LinearRing"===t){if(!Array.isArray(e[e.length-1]))return v.push({message:"a number was found where a coordinate array should have been found: this needs to be nested more deeply",line:r});e.length<4&&v.push({message:"a LinearRing of coordinates needs to have four or more positions",line:r}),!e.length||e[e.length-1].length===e[0].length&&e[e.length-1].every(function(t,n){return e[0][n]===t})||v.push({message:"the first and last positions in a LinearRing of coordinates must be the same",line:r})}else"Line"===t&&e.length<2&&v.push({message:"a line needs to have two or more coordinates to be valid",line:r});else Array.isArray(e)?e.forEach(function(e){a(e,t,n-1,e.__line__||r)}):v.push({message:"a number was found where a coordinate array should have been found: this needs to be nested more deeply",line:r})}function c(e){if(e.crs)if("object"==typeof e.crs){var t=i(e.crs,"type","string"),n=i(e.crs,"properties","object");t||n||("name"===e.crs.type?i(e.crs.properties,"name","string"):"link"===e.crs.type?i(e.crs.properties,"href","string"):v.push({message:'The type of a crs must be either "name" or "link"',line:e.__line__}))}else v.push({message:"the value of the crs property must be an object, not a "+typeof e.crs,line:e.__line__})}function u(e){if(e.bbox)if(Array.isArray(e.bbox)){if(!r(e.bbox,"number"))return v.push({message:"each element in a bbox property must be a number",line:e.bbox.__line__})}else v.push({message:"bbox property must be an array of numbers, but is a "+typeof e.bbox,line:e.__line__})}function l(e){c(e),u(e),i(e,"coordinates","array")||s(e.coordinates)}function p(e){c(e),u(e),i(e,"coordinates","array")||a(e.coordinates,"LinearRing",2)}function d(e){c(e),u(e),i(e,"coordinates","array")||a(e.coordinates,"LinearRing",3)}function f(e){c(e),u(e),i(e,"coordinates","array")||a(e.coordinates,"Line",1)}function h(e){c(e),u(e),i(e,"coordinates","array")||a(e.coordinates,"Line",2)}function y(e){c(e),u(e),i(e,"coordinates","array")||a(e.coordinates,"",1)}function g(e){c(e),u(e),i(e,"geometries","array")||(r(e.geometries,"object")||v.push({message:"The geometries array in a GeometryCollection must contain only geometry objects",line:e.__line__}),e.geometries.forEach(function(e){e&&n(e)}))}function m(e){c(e),u(e),void 0!==e.id&&"string"!=typeof e.id&&"number"!=typeof e.id&&v.push({message:'Feature "id" property must have a string or number value',line:e.__line__}),"Feature"!==e.type&&v.push({message:"GeoJSON features must have a type=feature property",line:e.__line__}),i(e,"properties","object"),i(e,"geometry","object")||e.geometry&&n(e.geometry)}var v=[],_={Point:l,Feature:m,MultiPoint:y,LineString:f,MultiLineString:h,FeatureCollection:o,GeometryCollection:g,Polygon:p,MultiPolygon:d};return"object"!=typeof e||null===e||void 0===e?(v.push({message:"The root of a GeoJSON object must be an object.",line:0}),v):(n(e),v.forEach(function(e){e.hasOwnProperty("line")&&void 0===e.line&&delete e.line}),v)}t.exports.hint=r},{}],8:[function(e,t,n){var r=t.exports=function(e,t){if(t||(t=16),void 0===e&&(e=128),0>=e)return"0";for(var n=Math.log(Math.pow(2,e))/Math.log(t),i=2;n===1/0;i*=2)n=Math.log(Math.pow(2,e/i))/Math.log(t)*i;for(var o=n-Math.floor(n),s="",i=0;i<Math.floor(n);i++){var a=Math.floor(Math.random()*t).toString(t);s=a+s}if(o){var c=Math.pow(t,o),a=Math.floor(Math.random()*c).toString(t);s=a+s}var u=parseInt(s,t);return u!==1/0&&u>=Math.pow(2,e)?r(e,t):s};r.rack=function(e,t,n){var i=function(i){var s=0;do{if(s++>10){if(!n)throw new Error("too many ID collisions, use more bits");e+=n}var a=r(e,t)}while(Object.hasOwnProperty.call(o,a));return o[a]=i,a},o=i.hats={};return i.get=function(e){return i.hats[e]},i.set=function(e,t){return i.hats[e]=t,i},i.bits=e||128,i.base=t||16,i}},{}],9:[function(e,t,n){"use strict";function r(e,t){this.x=e,this.y=t}t.exports=r,r.prototype={clone:function(){return new r(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,n=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=n,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=t*this.x-n*this.y,i=n*this.x+t*this.y;return this.x=r,this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},r.convert=function(e){return e instanceof r?e:Array.isArray(e)?new r(e[0],e[1]):e}},{}],10:[function(e,t,n){var r=e("geojson-area").geometry;t.exports=function(e){if("FeatureCollection"===e.type){for(var t=0,n=0;t<e.features.length;t++)e.features[t].geometry&&(n+=r(e.features[t].geometry));return n}return r("Feature"===e.type?e.geometry:e)}},{"geojson-area":11}],11:[function(e,t,n){function r(e){var t,n=0;switch(e.type){case"Polygon":return o(e.coordinates);case"MultiPolygon":for(t=0;t<e.coordinates.length;t++)n+=o(e.coordinates[t]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(t=0;t<e.geometries.length;t++)n+=r(e.geometries[t]);return n}}function o(e){var t=0;if(e&&e.length>0){t+=Math.abs(s(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(s(e[n]))}return t}function s(e){var t,n,r,o,s,u,l=0,p=e.length;if(p>2){for(i=0;i<p;i++)i===p-2?(o=p-2,s=p-1,u=0):i===p-1?(o=p-1,s=0,u=1):(o=i,s=i+1,u=i+2),t=e[o],n=e[s],r=e[u],l+=(a(r[0])-a(t[0]))*Math.sin(a(n[1]));l=l*c.RADIUS*c.RADIUS/2}return l}function a(e){return e*Math.PI/180}var c=e("wgs84");t.exports.geometry=r,t.exports.ring=s},{wgs84:12}],12:[function(e,t,n){t.exports.RADIUS=6378137,t.exports.FLATTENING=1/298.257223563,t.exports.POLAR_RADIUS=6356752.3142},{}],13:[function(e,t,n){"use strict";var r=e("hat"),i=e("./lib/features_at"),o=e("geojsonhint"),s={Polygon:e("./feature_types/polygon"),LineString:e("./feature_types/line_string"),Point:e("./feature_types/point"),MultiPolygon:e("./feature_types/multi_feature"),MultiLineString:e("./feature_types/multi_feature"),MultiPoint:e("./feature_types/multi_feature")},a=Object.keys(s).join(", ");t.exports=function(e){return{getFeatureIdsAt:function(t,n){var r=i({point:{x:t,y:n}},null,e);return r.map(function(e){return e.properties.id})},getSelectedIds:function(){return e.store.getSelectedIds()},add:function(t){var n=this,i=arguments.length<=1||void 0===arguments[1]?!0:arguments[1];if("FeatureCollection"===t.type||t.geometry||(t={type:"Feature",id:t.id,properties:t.properties||{},geometry:t}),i){var c=o.hint(t);if(c.length)throw new Error(c[0].message);("FeatureCollection"===t.type?t.features:[t]).forEach(function(e){if(void 0===s[e.geometry.type])throw new Error("Invalid feature type. Must be "+a)})}if("FeatureCollection"===t.type)return t.features.map(function(e){return n.add(e,!1)});if(t=JSON.parse(JSON.stringify(t)),t.id=t.id||r(),void 0===e.store.get(t.id)){var u=s[t.geometry.type],l=new u(e,t);e.store.add(l)}else{var p=e.store.get(t.id);p.properties=t.properties,p.incomingCoords(t.geometry.coordinates)}return e.store.render(),t.id},get:function(t){var n=e.store.get(t);return n?n.toGeoJSON():void 0},getAll:function(){return{type:"FeatureCollection",features:e.store.getAll().map(function(e){return e.toGeoJSON()})}},"delete":function(t){e.store["delete"]([t]),e.store.render()},deleteAll:function(){e.store["delete"](e.store.getAll().map(function(e){return e.id})),e.store.render()},changeMode:function(t,n){e.events.changeMode(t,n)},trash:function(){e.events.fire("trash")}}}},{"./feature_types/line_string":17,"./feature_types/multi_feature":18,"./feature_types/point":19,"./feature_types/polygon":20,"./lib/features_at":28,geojsonhint:5,hat:8}],14:[function(e,t,n){"use strict";t.exports={CONTROL_BUTTON_CLASS:"mapbox-gl-draw_ctrl-draw-btn"}},{}],15:[function(e,t,n){"use strict";var r=e("./lib/mode_handler"),i=e("./lib/get_features_and_set_cursor"),o=e("./lib/is_click"),s=e("./lib/simple_set"),a={simple_select:e("./modes/simple_select"),direct_select:e("./modes/direct_select"),draw_point:e("./modes/draw_point"),draw_line_string:e("./modes/draw_line_string"),draw_polygon:e("./modes/draw_polygon")};t.exports=function(e){var t={isDown:!1},n={},c="simple_select",u=r(a.simple_select(e),e),l=new s,p=function(){e.store.getChangedIds().forEach(function(e){return l.add(e)});var t=l.values().map(function(t){return e.store.get(t)}).filter(function(e){return void 0!==e}).filter(function(e){return e.isValid()}).map(function(e){return e.toGeoJSON()});t.length>0&&e.map.fire("draw.modified",{features:t,stack:new Error("hi").stack}),l.clear()};n.drag=function(n){o(t,{point:n.point,time:(new Date).getTime()})?n.originalEvent.stopPropagation():(e.ui.setClass({mouse:"drag"}),u.drag(n))},n.mousemove=function(r){if(t.isDown)n.drag(r);else{var o=i(r,e);r.featureTarget=o,u.mousemove(r)}},n.drawChanged=function(e){e.features.forEach(function(e){return l.add(e.id)})},n.mousedown=function(n){t={isDown:!0,time:(new Date).getTime(),point:n.point};var r=i(n,e);n.featureTarget=r,u.mousedown(n)},n.mouseup=function(n){t.isDown=!1;var r=i(n,e);n.featureTarget=r,o(t,{point:n.point,time:(new Date).getTime()})?u.click(n):u.mouseup(n),p()},n.trash=function(){u.trash()};var d=function(e){return!(8===e||e>=48&&57>=e)};n.keydown=function(t){8===t.keyCode&&e.options.controls.trash?(t.preventDefault(),f.fire("trash")):d(t.keyCode)?u.keydown(t):49===t.keyCode&&e.options.controls.point?e.api.changeMode("draw_point"):50===t.keyCode&&e.options.controls.line_string?e.api.changeMode("draw_line_string"):51===t.keyCode&&e.options.controls.polygon&&e.api.changeMode("draw_polygon")},n.keyup=function(e){d(e.keyCode)&&u.keyup(e),p()},n.zoomend=function(){e.store.changeZoom()};var f={currentModeName:function(){return c},currentModeRender:function(e,t){return u.render(e,t)},changeMode:function(t,n){u.stop();var i=a[t];if(void 0===i)throw new Error(t+" is not valid");c=t;var o=i(e,n);u=r(o,e),e.map.fire("draw.modechange",{mode:t,opts:n}),e.store.setDirty(),e.store.render()},fire:function(e,t){n[e]&&n[e](t)},addEventListeners:function(){e.map.on("mousemove",n.mousemove),e.map.on("mousedown",n.mousedown),e.map.on("mouseup",n.mouseup),e.map.on("draw.changed",n.drawChanged),e.options.keybindings&&(e.container.addEventListener("keydown",n.keydown),e.container.addEventListener("keyup",n.keyup))},removeEventListeners:function(){e.map.off("mousemove",n.mousemove),e.map.off("mousedown",n.mousedown),e.map.off("mouseup",n.mouseup),e.map.off("draw.changed",n.drawChanged),e.options.keybindings&&(e.container.removeEventListener("keydown",n.keydown),e.container.removeEventListener("keyup",n.keyup))}};return f}},{"./lib/get_features_and_set_cursor":29,"./lib/is_click":30,"./lib/mode_handler":32,"./lib/simple_set":35,"./modes/direct_select":41,"./modes/draw_line_string":42,"./modes/draw_point":43,"./modes/draw_polygon":44,"./modes/simple_select":45}],16:[function(e,t,n){"use strict";var r=e("hat"),i=function(e,t){this.ctx=e,this.properties=t.properties||{},this.coordinates=t.geometry.coordinates,this.id=t.id||r(),this.type=t.geometry.type};i.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},i.prototype.incomingCoords=function(e){this.setCoordinates(e)},i.prototype.setCoordinates=function(e){this.coordinates=e,this.changed()},i.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},i.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:"Feature",properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},i.prototype.internal=function(e){return{type:"Feature",properties:{id:this.id,meta:"feature","meta:type":this.type,active:"false",mode:e},geometry:{coordinates:this.getCoordinates(),type:this.type}}},t.exports=i},{hat:8}],17:[function(e,t,n){"use strict";var r=e("./feature"),i=function(e,t){r.call(this,e,t)};i.prototype=Object.create(r.prototype),i.prototype.isValid=function(){return this.coordinates.length>1},i.prototype.addCoordinate=function(e,t,n){this.changed();var r=parseInt(e,10);this.coordinates.splice(r,0,[t,n])},i.prototype.getCoordinate=function(e){var t=parseInt(e,10);return JSON.parse(JSON.stringify(this.coordinates[t]))},i.prototype.removeCoordinate=function(e){this.changed(),this.coordinates.splice(parseInt(e,10),1)},i.prototype.updateCoordinate=function(e,t,n){var r=parseInt(e,10);this.coordinates[r]=[t,n],this.changed()},t.exports=i},{"./feature":16}],18:[function(e,t,n){"use strict";var r=e("./feature"),i={MultiPoint:e("./point"),MultiLineString:e("./line_string"),MultiPolygon:e("./polygon")},o=function(e,t,n,r,i){var o=n.split("."),s=parseInt(o[0],10),a=o[1]?o.slice(1).join("."):null;return e[s][t](a,r,i)},s=function(e,t){if(r.call(this,e,t),delete this.coordinates,this.model=i[t.geometry.type],void 0===this.model)throw new TypeError(t.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(t.geometry.coordinates)};s.prototype=Object.create(r.prototype),s.prototype._coordinatesToFeatures=function(e){var t=this;return e.map(function(e){return new t.model(t.ctx,{id:t.id,type:"Feature",properties:{},geometry:{coordinates:e,type:t.type.replace("Multi","")}})})},s.prototype.isValid=function(){return this.features.every(function(e){return e.isValid()})},s.prototype.setCoordinates=function(e){this.features=this._coordinatesToFeatures(e),this.changed()},s.prototype.getCoordinate=function(e){return o(this.features,"getCoordinate",e)},s.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(function(e){return"Polygon"===e.type?e.getCoordinates():e.coordinates})))},s.prototype.updateCoordinate=function(e,t,n){o(this.features,"updateCoordinate",e,t,n)},s.prototype.addCoordinate=function(e,t,n){o(this.features,"addCoordinate",e,t,n)},s.prototype.removeCoordinate=function(e){o(this.features,"removeCoordinate",e)},t.exports=s},{"./feature":16,"./line_string":17,"./point":19,"./polygon":20}],19:[function(e,t,n){"use strict";var r=e("./feature"),i=function(e,t){r.call(this,e,t)};i.prototype=Object.create(r.prototype),i.prototype.isValid=function(){return"number"==typeof this.coordinates[0]&&"number"==typeof this.coordinates[1];
},i.prototype.updateCoordinate=function(e,t,n){3===arguments.length?this.coordinates=[t,n]:this.coordinates=[e,t],this.changed()},i.prototype.getCoordinate=function(){return this.getCoordinates()},t.exports=i},{"./feature":16}],20:[function(e,t,n){"use strict";var r=e("./feature"),i=function(e,t){r.call(this,e,t),this.coordinates=this.coordinates.map(function(e){return e.slice(0,-1)})};i.prototype=Object.create(r.prototype),i.prototype.isValid=function(){return this.coordinates.every(function(e){return e.length>2})},i.prototype.incomingCoords=function(e){this.coordinates=e.map(function(e){return e.slice(0,-1)}),this.changed()},i.prototype.setCoordinates=function(e){this.coordinates=e,this.changed()},i.prototype.addCoordinate=function(e,t,n){this.changed();var r=e.split(".").map(function(e){return parseInt(e,10)}),i=this.coordinates[r[0]];i.splice(r[1],0,[t,n])},i.prototype.removeCoordinate=function(e){this.changed();var t=e.split(".").map(function(e){return parseInt(e,10)}),n=this.coordinates[t[0]];n&&(n.splice(t[1],1),n.length<3&&this.coordinates.splice(t[0],1))},i.prototype.getCoordinate=function(e){var t=e.split(".").map(function(e){return parseInt(e,10)}),n=this.coordinates[t[0]];return JSON.parse(JSON.stringify(n[t[1]]))},i.prototype.getCoordinates=function(){return this.coordinates.map(function(e){return e.concat([e[0]])})},i.prototype.updateCoordinate=function(e,t,n){this.changed();var r=e.split("."),i=parseInt(r[0],10),o=parseInt(r[1],10);void 0===this.coordinates[i]&&(this.coordinates[i]=[]),this.coordinates[i][o]=[t,n]},t.exports=i},{"./feature":16}],21:[function(e,t,n){"use strict";t.exports={isOfMetaType:function(e){return function(t){var n=t.featureTarget;return n&&n.properties?n.properties.meta===e:!1}},isBoxSelecting:function(e){return e.originalEvent&&e.originalEvent.shiftKey?0===e.originalEvent.button:!1},isActiveFeature:function(e){return e.featureTarget&&e.featureTarget.properties?"true"===e.featureTarget.properties.active&&"feature"===e.featureTarget.properties.meta:!1},isInactiveFeature:function(e){return e.featureTarget&&e.featureTarget.properties?"false"===e.featureTarget.properties.active&&"feature"===e.featureTarget.properties.meta:!1},noFeature:function(e){return void 0===e.featureTarget},isFeature:function(e){return e.featureTarget&&e.featureTarget.properties?"feature"===e.featureTarget.properties.meta:!1},isShiftDown:function(e){return e.originalEvent?e.originalEvent.shiftKey===!0:!1},isEscapeKey:function(e){return 27===e.keyCode},isEnterKey:function(e){return 13===e.keyCode}}},{}],22:[function(e,t,n){"use strict";function r(e){var t={title:e.title};e.id&&(t.id=e.id),t["class"]=o.CONTROL_BUTTON_CLASS+" "+e.className;var n=i.create("button",e.container,t);return n.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation();var n=t.target;n.classList.contains("active")?n.classList.remove("active"):(i.removeClass(document.querySelectorAll("."+o.CONTROL_BUTTON_CLASS),"active"),n.classList.add("active"),e.onActivate())},!0),n}var i=e("./dom_utils"),o=e("../constants");t.exports=r},{"../constants":14,"./dom_utils":26}],23:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){var i=t.geometry.coordinates,o=n.geometry.coordinates,s=r.project([i[0],i[1]]),a=r.project([o[0],o[1]]),c=r.unproject([(s.x+a.x)/2,(s.y+a.y)/2]);return{type:"Feature",properties:{meta:"midpoint",parent:e,lng:c.lng,lat:c.lat,coord_path:n.properties.coord_path},geometry:{type:"Point",coordinates:[c.lng,c.lat]}}}},{}],24:[function(e,t,n){"use strict";function r(e){function t(e,t){var r="",s=null;e.forEach(function(e,c){var u=t?t+"."+c:String(c),l=i(d,e,u,n(u));a.midpoints&&s&&f.push(o(d,s,l,a.map)),s=l;var p=JSON.stringify(e);r!==p&&f.push(l),0===c&&(r=p)})}function n(e){return a.selectedPaths?-1!==a.selectedPaths.indexOf(e):!1}function s(){var t=l.replace("Multi","");p.forEach(function(n,i){var o={type:"Feature",properties:e.properties,geometry:{type:t,coordinates:n}};f=f.concat(r(o,a,i))})}var a=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],c=arguments.length<=2||void 0===arguments[2]?null:arguments[2],u=e.geometry,l=u.type,p=u.coordinates,d=e.properties&&e.properties.id,f=[];return"Point"===l?f.push(i(d,p,c,n(c))):"Polygon"===l?p.forEach(function(e,n){t(e,c?c+"."+n:String(n))}):"LineString"===l?t(p,c):0===l.indexOf("Multi")&&s(),f}var i=e("./create_vertex"),o=e("./create_midpoint");t.exports=r},{"./create_midpoint":23,"./create_vertex":25}],25:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){return{type:"Feature",properties:{meta:"vertex",parent:e,coord_path:n,active:""+r},geometry:{type:"Point",coordinates:t}}}},{}],26:[function(e,t,n){"use strict";var r={};r.create=function(e,t,n){var r=document.createElement(e);if(n)for(var i in n)n.hasOwnProperty(i)&&r.setAttribute(i,n[i]);return t&&t.appendChild(r),r},r.removeClass=function(e,t){Array.prototype.forEach.call(e,function(e){e.classList.remove(t)})},t.exports=r},{}],27:[function(e,t,n){"use strict";t.exports=function(e,t){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}},{}],28:[function(e,t,n){"use strict";var r=e("./sort_features"),i=e("./map_event_to_bounding_box"),o=["feature","midpoint","vertex"];t.exports=function(e,t,n){if(null===n.map)return[];var s=e?i(e,n.options.clickBuffer):t,a={};n.options.styles&&(a.layers=n.options.styles.map(function(e){return e.id}));var c=n.map.queryRenderedFeatures(s,a).filter(function(e){return-1!==o.indexOf(e.properties.meta)});return r(c)}},{"./map_event_to_bounding_box":31,"./sort_features":36}],29:[function(e,t,n){"use strict";var r=e("./features_at");t.exports=function(e,t){var n=r(e,null,t),i={mouse:"none"};return n[0]&&(i.mouse="true"===n[0].properties.active?"move":"pointer",i.feature=n[0].properties.meta),t.events.currentModeName().includes("draw")&&(i.mouse="add"),t.ui.setClass(i),n[0]}},{"./features_at":28}],30:[function(e,t,n){"use strict";var r=e("./euclidean_distance"),i=4,o=12,s=500;t.exports=function(e,t){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],a=null!=n.fineTolerance?n.fineTolerance:i,c=null!=n.grossTolerance?n.grossTolerance:o,u=null!=n.interval?n.interval:s;e.point=e.point||t.point,e.time=e.time||t.time;var l=r(e.point,t.point);return a>l||c>l&&t.time-e.time<u}},{"./euclidean_distance":27}],31:[function(e,t,n){"use strict";function r(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1];return[[e.point.x-t,e.point.y-t],[e.point.x+t,e.point.y+t]]}t.exports=r},{}],32:[function(e,t,n){"use strict";var r=function(e,t){var n={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],keydown:[],keyup:[],trash:[]},r={on:function(e,t,r){if(void 0===n[e])throw new Error("Invalid event type: "+e);n[e].push({selector:t,fn:r})},off:function(e,t,r){n[e]=n[e].filter(function(e){return e.selector!==t||e.fn!==r})},fire:function(e,n){var r=t.events.currentModeName();t.map.fire("draw."+r+"."+e,n)},render:function(e){t.store.featureChanged(e)}},i=function(e,i){for(var o=n[e],s=o.length;s--;){var a=o[s];if(a.selector(i)){a.fn.call(r,i),t.store.render();break}}t.ui.fireClassUpdate()};return e.start.call(r),{render:e.render||function(e){return e},stop:function(){e.stop&&e.stop()},drag:function(e){i("drag",e)},click:function(e){i("click",e)},mousemove:function(e){i("mousemove",e)},mousedown:function(e){i("mousedown",e)},mouseup:function(e){i("mouseup",e)},keydown:function(e){i("keydown",e)},keyup:function(e){i("keyup",e)},trash:function(e){i("trash",e)}}};t.exports=r},{}],33:[function(e,t,n){"use strict";function r(e,t){var n=t.getBoundingClientRect();return new i(e.clientX-n.left-t.clientLeft,e.clientY-n.top-t.clientTop)}var i=e("point-geometry");t.exports=r},{"point-geometry":9}],34:[function(e,t,n){"use strict";t.exports=function(){"function"!=typeof Object.assign&&!function(){Object.assign=function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])}return t}}()}},{}],35:[function(e,t,n){"use strict";function r(e){this._items=e?e.slice():[]}r.prototype.add=function(e){return-1===this._items.indexOf(e)?(this._items.push(e),this):void 0},r.prototype["delete"]=function(e){var t=this._items.indexOf(e);if(-1!==t)return this._items.splice(t,1),this},r.prototype.has=function(e){return-1!==this._items.indexOf(e)},r.prototype.values=function(){return this._items.slice()},r.prototype.clear=function(){return this._items=[],this},t.exports=r},{}],36:[function(e,t,n){"use strict";function r(e,t){var n=s[e.geometry.type]-s[t.geometry.type];return 0===n&&"Polygon"===e.geometry.type?e.area-t.area:n}function i(e){return e.map(function(e){return"Polygon"===e.geometry.type&&(e.area=o({type:"Feature",property:{},geometry:e.geometry})),e}).sort(r).map(function(e){return delete e.area,e})}var o=e("turf-area"),s={Point:0,LineString:1,Polygon:2};t.exports=i},{"turf-area":10}],37:[function(e,t,n){"use strict";t.exports=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1},interactive:!0},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1},interactive:!0},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"},interactive:!0},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2},interactive:!0},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2},interactive:!0},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2},interactive:!0},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2},interactive:!0},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#fff"},interactive:!0},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"},interactive:!0},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"},interactive:!0},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"},interactive:!0},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"},interactive:!0},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"},interactive:!0}]},{}],38:[function(e,t,n){"use strict";function r(e,t,n){var r,i,o,s;return s=function(){r=!1,i&&(o.apply(n,i),i=!1)},o=function(){r?i=arguments:(e.apply(n,arguments),setTimeout(s,t),r=!0)}}t.exports=r},{}],39:[function(e,t,n){"use strict";function r(e){return[].concat(e).filter(function(e){return void 0!==e})}t.exports=r},{}],40:[function(e,t,n){"use strict";var r={POLYGON:"polygon",LINE:"line_string",POINT:"point"};t.exports=r},{}],41:[function(e,t,n){"use strict";var r=e("../lib/common_selectors"),i=r.noFeature,o=r.isOfMetaType,s=r.isInactiveFeature,a=r.isShiftDown,c=e("../lib/create_supplementary_points");t.exports=function(e,t){var n=t.featureId,r=e.store.get(n);if("Point"===r.type)throw new TypeError("direct_select mode doesn't handle point features");var u=t.isDragging||!1,l=t.startPos||null,p=null,d=null,f=t.coordPath?[t.coordPath]:[],h=function(e){u=!0,l=e.lngLat;var t=e.featureTarget.properties,n=f.indexOf(t.coord_path);a(e)||-1!==n?a(e)&&-1===n&&f.push(t.coord_path):f=[t.coord_path],r.changed()},y=function(e){u=!0,l=e.lngLat;var t=e.featureTarget.properties;r.addCoordinate(t.coord_path,t.lng,t.lat),f=[t.coord_path]},g=function(){p=f.map(function(e){return r.getCoordinate(e)}),d=p.length};return{start:function(){e.store.setSelected(n),e.map.doubleClickZoom.disable(),this.on("mousedown",o("vertex"),h),this.on("mousedown",o("midpoint"),y),this.on("drag",function(){return u},function(e){e.originalEvent.stopPropagation(),null===p&&g();for(var t=e.lngLat.lng-l.lng,n=e.lngLat.lat-l.lat,i=0;d>i;i++){var o=f[i],s=p[i],a=s[0]+t,c=s[1]+n;r.updateCoordinate(o,a,c)}}),this.on("mouseup",function(){return!0},function(){u=!1,p=null,d=null,l=null}),this.on("click",i,function(){e.events.changeMode("simple_select")}),this.on("click",s,function(){e.events.changeMode("simple_select")}),this.on("trash",function(){return f.length>0},function(){f.sort().reverse().forEach(function(e){return r.removeCoordinate(e)}),f=[],r.isValid()===!1&&(e.store["delete"]([n]),e.events.changeMode("simple_select"))}),this.on("trash",function(){return 0===f.length},function(){e.events.changeMode("simple_select",[n])})},stop:function(){e.map.doubleClickZoom.enable()},render:function(t,r){n===t.properties.id?(t.properties.active="true",r(t),c(t,{map:e.map,midpoints:!0,selectedPaths:f}).forEach(r)):(t.properties.active="false",r(t))}}}},{"../lib/common_selectors":21,"../lib/create_supplementary_points":24}],42:[function(e,t,n){"use strict";var r=e("../lib/common_selectors"),i=r.isEnterKey,o=r.isEscapeKey,s=e("../feature_types/line_string"),a=e("../lib/types");t.exports=function(e){var t=new s(e,{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:[]}});e.store.add(t);var n=function(){e.events.changeMode("simple_select"),e.store["delete"]([t.id])},r=0,c=function(e){t.updateCoordinate(r,e.lngLat.lng,e.lngLat.lat)},u=function(n){e.ui.setClass({mouse:"add"}),r>0&&t.coordinates[0][0]===n.lngLat.lng&&t.coordinates[0][1]===n.lngLat.lat?l():r>0&&t.coordinates[r-1][0]===n.lngLat.lng&&t.coordinates[r-1][1]===n.lngLat.lat?l():(t.updateCoordinate(r,n.lngLat.lng,n.lngLat.lat),r++)},l=function(){return t.isValid()?(t.removeCoordinate(""+r),r--,void e.events.changeMode("simple_select",[t.id])):e.store["delete"]([t.id])};return{start:function(){e.store.clearSelected(),setTimeout(function(){e.map&&e.map.doubleClickZoom&&e.map.doubleClickZoom.disable()}),e.ui.setClass({mouse:"add"}),e.ui.setButtonActive(a.LINE),this.on("mousemove",function(){return!0},c),this.on("click",function(){return!0},u),this.on("keyup",o,n),this.on("keyup",i,l),this.on("trash",function(){return!0},n)},stop:function(){setTimeout(function(){e.map&&e.map.doubleClickZoom&&e.map.doubleClickZoom.enable()},0),e.ui.setButtonInactive(a.LINE),t.isValid()||e.store["delete"]([t.id])},render:function(e,n){void 0!==e.geometry.coordinates[0]&&(e.properties.active=e.properties.id===t.id?"true":"false",e.properties.meta="true"===e.properties.active?"feature":e.properties.meta,n(e))}}}},{"../feature_types/line_string":17,"../lib/common_selectors":21,"../lib/types":40}],43:[function(e,t,n){"use strict";var r=e("../lib/common_selectors"),i=r.isEnterKey,o=r.isEscapeKey,s=e("../feature_types/point"),a=e("../lib/types");t.exports=function(e){var t=new s(e,{type:"Feature",properties:{},geometry:{type:"Point",coordinates:[]}});e.store.add(t);var n=function(){e.events.changeMode("simple_select"),e.store["delete"]([t.id])},r=!1,c=function(n){e.ui.setClass({mouse:"move"}),r=!0,t.updateCoordinate("",n.lngLat.lng,n.lngLat.lat),e.events.changeMode("simple_select",[t.id])};return{start:function(){e.store.clearSelected(),e.ui.setClass({mouse:"add"}),e.ui.setButtonActive(a.POINT),this.on("click",function(){return!0},c),this.on("keyup",o,n),this.on("keyup",i,n),this.on("trash",function(){return!0},n)},stop:function(){e.ui.setButtonInactive(a.POINT),r===!1&&e.store["delete"]([t.id])},render:function(e,n){e.properties.active=e.properties.id===t.id?"true":"false","false"===e.properties.active&&n(e)}}}},{"../feature_types/point":19,"../lib/common_selectors":21,"../lib/types":40}],44:[function(e,t,n){"use strict";var r=e("../lib/common_selectors"),i=r.isEnterKey,o=r.isEscapeKey,s=e("../feature_types/polygon"),a=e("../lib/types");t.exports=function(e){var t=new s(e,{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[]]}});e.store.add(t);var n=function(){e.events.changeMode("simple_select"),e.store["delete"]([t.id])},r=0,c=function(e){t.updateCoordinate("0."+r,e.lngLat.lng,e.lngLat.lat)},u=function(n){e.ui.setClass({mouse:"add"}),r>0&&t.coordinates[0][0][0]===n.lngLat.lng&&t.coordinates[0][0][1]===n.lngLat.lat?l():r>0&&t.coordinates[0][r-1][0]===n.lngLat.lng&&t.coordinates[0][r-1][1]===n.lngLat.lat?l():(t.updateCoordinate("0."+r,n.lngLat.lng,n.lngLat.lat),r++)},l=function(){return t.isValid()?(t.removeCoordinate("0."+r),r--,void e.events.changeMode("simple_select",[t.id])):e.store["delete"]([t.id])};return{start:function(){e.store.clearSelected(),setTimeout(function(){e.map&&e.map.doubleClickZoom&&e.map.doubleClickZoom.disable()},0),e.ui.setClass({mouse:"add"}),e.ui.setButtonActive(a.POLYGON),this.on("mousemove",function(){return!0},c),this.on("click",function(){return!0},u),this.on("keyup",o,n),this.on("keyup",i,l),this.on("trash",function(){return!0},n)},stop:function(){setTimeout(function(){e.map&&e.map.doubleClickZoom&&e.map.doubleClickZoom.enable()},0),e.ui.setButtonInactive(a.POLYGON),t.isValid()||e.store["delete"]([t.id])},render:function(e,n){if(e.properties.active=e.properties.id===t.id?"true":"false",e.properties.meta="true"===e.properties.active?"feature":e.properties.meta,"true"===e.properties.active&&1===r){var i=[[e.geometry.coordinates[0][0][0],e.geometry.coordinates[0][0][1]],[e.geometry.coordinates[0][1][0],e.geometry.coordinates[0][1][1]]];n({type:"Feature",properties:e.properties,geometry:{coordinates:i,type:"LineString"}})}else("false"===e.properties.active||r>1)&&n(e)}}}},{"../feature_types/polygon":20,"../lib/common_selectors":21,"../lib/types":40}],45:[function(e,t,n){"use strict";var r=e("../lib/common_selectors"),i=r.noFeature,o=r.isShiftDown,s=r.isFeature,a=r.isOfMetaType,c=r.isBoxSelecting,u=r.isActiveFeature,l=e("../lib/mouse_event_point"),p=e("../lib/features_at"),d=e("../lib/create_supplementary_points");t.exports=function(e,t){function n(e){return e.length?e.map(function(e){return e.properties.id}).filter(function(e,t,n){return e&&(!t||e!==n[t-1])}):[]}var r,f=null,h=null,y=null,g=null,m=null,v=null,_=!1,b=function(t,i){if(r&&(r.parentNode.removeChild(r),r=null),t){var o=p(null,t,e);if(o.length>=1e3)return e.map.dragPan.enable();var s=n(o).filter(function(t){return!e.store.isSelected(t)});s.length&&(e.store.select(s),s.forEach(function(e){i.render(e)}),e.ui.setClass({mouse:"move"}))}_=!1,setTimeout(function(){e.map.dragPan.enable()},0)},x=function(t){if(s(t)){var n=t.featureTarget.properties;return e.store.isSelected(n.id)&&"Point"!==e.store.get(n.id).type}return!1},w=function(){var t=e.store.getSelectedIds();y=t.map(function(t){return e.store.get(t).coordinates}),m=t.map(function(t){return e.store.get(t)}),v=t.length},k=function(t){e.api.changeMode("direct_select",{featureId:t.featureTarget.properties.id})};return{stop:function(){e.map.doubleClickZoom.enable()},start:function(){h=!1,e.store&&e.store.setSelected(t),this.on("click",i,function(){var t=this,n=e.store.getSelectedIds();e.store.clearSelected(),n.forEach(function(e){return t.render(e)}),e.map.doubleClickZoom.enable()}),this.on("click",a("vertex"),function(t){e.api.changeMode("direct_select",{featureId:t.featureTarget.properties.parent,coordPath:t.featureTarget.properties.coord_path,isDragging:!0,startPos:t.lngLat}),e.ui.setClass({mouse:"move"})}),e.options.boxSelect&&this.on("mousedown",c,function(t){e.map.dragPan.disable(),g=l(t.originalEvent,e.container),_=!0}),this.on("mousedown",u,function(e){f=e.lngLat,h=!0}),this.on("click",s,function(t){var n=this;e.map.doubleClickZoom.disable();var r=t.featureTarget.properties.id,i=e.store.getSelectedIds();e.store.isSelected(r)&&!o(t)?(this.on("click",x,k),e.ui.setClass({mouse:"pointer"})):e.store.isSelected(r)&&o(t)?(e.store.deselect(r),e.ui.setClass({mouse:"pointer"}),this.render(r),1===i.length&&e.map.doubleClickZoom.enable()):!e.store.isSelected(r)&&o(t)?(e.store.select(r),e.ui.setClass({mouse:"move"}),this.render(r)):e.store.isSelected(r)||o(t)||(i.forEach(function(e){return n.render(e)}),e.store.clearSelected(),e.store.select(r),e.ui.setClass({mouse:"move"}),this.render(r))}),this.on("drag",function(){return _},function(t){e.ui.setClass({mouse:"add"}),r||(r=document.createElement("div"),r.classList.add("mapbox-gl-draw_boxselect"),e.container.appendChild(r));var n=l(t.originalEvent,e.container),i=Math.min(g.x,n.x),o=Math.max(g.x,n.x),s=Math.min(g.y,n.y),a=Math.max(g.y,n.y),c="translate("+i+"px,"+s+"px)";r.style.transform=c,r.style.WebkitTransform=c,r.style.width=o-i+"px",r.style.height=a-s+"px"}),this.on("mouseup",function(){return!0},function(t){h=!1,y=null,m=null,v=null,_&&b([g,l(t.originalEvent,e.container)],this)}),this.on("drag",function(){return h},function(e){this.off("click",x,k),e.originalEvent.stopPropagation(),null===y&&w();for(var t=e.lngLat.lng-f.lng,n=e.lngLat.lat-f.lat,r=function(e){return[e[0]+t,e[1]+n]},i=function(e){return e.map(function(e){return r(e)})},o=function(e){return e.map(function(e){return i(e)})},s=0;v>s;s++){var a=m[s];"Point"===a.type?a.setCoordinates(r(y[s])):"LineString"===a.type||"MultiPoint"===a.type?a.setCoordinates(y[s].map(r)):"Polygon"===a.type||"MultiLineString"===a.type?a.setCoordinates(y[s].map(i)):"MultiPolygon"===a.type&&a.setCoordinates(y[s].map(o))}}),this.on("trash",function(){return!0},function(){h=!1,y=null,m=null,v=null,e.store["delete"](e.store.getSelectedIds())})},render:function(t,n){t.properties.active=e.store.isSelected(t.properties.id)?"true":"false",n(t),"true"===t.properties.active&&"Point"!==t.geometry.type&&d(t).forEach(n)}}}},{"../lib/common_selectors":21,"../lib/create_supplementary_points":24,"../lib/features_at":28,"../lib/mouse_event_point":33}],46:[function(e,t,n){"use strict";function r(e,t){return e.map(function(e){var n=Object.assign({},e);return n.source?e:(n.id=n.id+"."+t,n.source="mapbox-gl-draw-"+t,n)})}var i={defaultMode:"simple_select",position:"top-left",keybindings:!0,clickBuffer:2,boxSelect:!0,displayControlsDefault:!0,styles:e("./lib/theme"),controls:{}},o={point:!0,line_string:!0,polygon:!0,trash:!0},s={point:!1,line_string:!1,polygon:!1,trash:!1};t.exports=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=Object.assign({},e);return t.controls||(t.controls={}),t.displayControlsDefault===!1?t.controls=Object.assign({},s,t.controls):t.controls=Object.assign({},o,t.controls),t=Object.assign({},i,t),t.styles=r(t.styles,"cold").concat(r(t.styles,"hot")),t}},{"./lib/theme":37}],47:[function(e,t,n){"use strict";t.exports=function(){function e(){t.isDirty=!1,t.clearChangedIds()}var t=this,n=t.ctx.map&&void 0!==t.ctx.map.getSource("mapbox-gl-draw-hot");if(!n)return e();var r=t.ctx.events.currentModeName();t.ctx.ui.setClass({mode:r});var i=[],o=[];t.isDirty?o=t.getAllIds():(i=t.getChangedIds().filter(function(e){return void 0!==t.get(e)}),o=t.sources.hot.filter(function(e){return e.properties.id&&-1===i.indexOf(e.properties.id)&&void 0!==t.get(e.properties.id)}).map(function(e){return e.properties.id})),t.sources.hot=[];var s=t.sources.cold.length;t.sources.cold=t.isDirty?[]:t.sources.cold.filter(function(e){var t=e.properties.id||e.properties.parent;return-1===i.indexOf(t)});var a=s!==t.sources.cold.length||o.length>0;i.concat(o).concat(o).map(function(e){return i.indexOf(e)>-1?{source:"hot",id:e}:{source:"cold",id:e}}).forEach(function(e){var n=e.id,i=e.source,o=t.get(n),s=o.internal(r);t.ctx.events.currentModeRender(s,function(e){t.sources[i].push(e)})}),a&&t.ctx.map.getSource("mapbox-gl-draw-cold").setData({type:"FeatureCollection",features:t.sources.cold}),t.ctx.map.getSource("mapbox-gl-draw-hot").setData({type:"FeatureCollection",features:t.sources.hot});var c=t.getChangedIds().map(function(e){return t.get(e)}).filter(function(e){return void 0!==e}).filter(function(e){return e.isValid()}).map(function(e){return e.toGeoJSON()});c.length&&t.ctx.map.fire("draw.changed",{features:c});var u=t.flushSelected();u.selected.length&&t.ctx.map.fire("draw.select",{featureIds:u.selected}),u.deselected.length&&t.ctx.map.fire("draw.deselect",{featureIds:u.deselected}),e()}},{}],48:[function(e,t,n){"use strict";var r=e("./events"),i=e("./store"),o=e("./ui");t.exports=function(e){e.events=r(e),e.map=null,e.container=null,e.store=null,o(e);var t={addTo:function(n){return e.map=n,t.onAdd(n),this},remove:function(){return t.removeLayers(),e.ui.removeButtons(),e.events.removeEventListeners(),e.map=null,e.container=null,e.store=null,this},onAdd:function(n){e.container=n.getContainer(),e.store=new i(e),e.ui.addButtons(),e.options.boxSelect&&(n.boxZoom.disable(),n.dragPan.disable(),n.dragPan.enable()),n.style.loaded()?(t.addLayers(),e.events.addEventListeners()):n.on("load",function(){t.addLayers(),e.events.addEventListeners()})},addLayers:function(){e.map.addSource("mapbox-gl-draw-cold",{data:{type:"FeatureCollection",features:[]},type:"geojson"}),e.map.addSource("mapbox-gl-draw-hot",{data:{type:"FeatureCollection",features:[]},type:"geojson"}),e.options.styles.forEach(function(t){e.map.addLayer(t)}),e.store.render()},removeLayers:function(){e.options.styles.forEach(function(t){e.map.removeLayer(t.id)}),e.map.removeSource("mapbox-gl-draw-cold"),e.map.removeSource("mapbox-gl-draw-hot")}};return t}},{"./events":15,"./store":49,"./ui":50}],49:[function(e,t,n){"use strict";var r=e("./lib/throttle"),i=e("./lib/to_dense_array"),o=e("./lib/simple_set"),s=e("./render"),a=t.exports=function(e){this._features={},this._featureIds=new o,this._selectedFeatureIds=new o,this._selectedSinceLastFlush=new o,this._deselectedSinceLastFlush=new o,this._changedIds=new o,this.ctx=e,this.sources={hot:[],cold:[]},this.render=r(s,16,this),this.isDirty=!1};a.prototype.setDirty=function(){return this.isDirty=!0,this},a.prototype.featureChanged=function(e){return this._changedIds.add(e),this},a.prototype.getChangedIds=function(){return this._changedIds.values()},a.prototype.clearChangedIds=function(){return this._changedIds.clear(),this},a.prototype.getAllIds=function(){return this._featureIds.values()},a.prototype.add=function(e){return this.featureChanged(e.id),this._features[e.id]=e,this._featureIds.add(e.id),this},a.prototype["delete"]=function(e){var t=this,n=[];return i(e).forEach(function(e){t._featureIds.has(e)&&(n.push(t.get(e).toGeoJSON()),delete t._features[e],t._featureIds["delete"](e),t._selectedFeatureIds["delete"](e),t._selectedSinceLastFlush["delete"](e),t._deselectedSinceLastFlush["delete"](e))}),n.length>0&&(this.isDirty=!0,this.ctx.map.fire("draw.deleted",{featureIds:n})),this},a.prototype.get=function(e){return this._features[e]},a.prototype.getAll=function(){var e=this;return Object.keys(this._features).map(function(t){return e._features[t]})},a.prototype.select=function(e){var t=this;return i(e).forEach(function(e){t._selectedFeatureIds.has(e)||(t._selectedFeatureIds.add(e),t._selectedSinceLastFlush.add(e),t._deselectedSinceLastFlush["delete"](e))}),this},a.prototype.deselect=function(e){var t=this;return i(e).forEach(function(e){t._selectedFeatureIds.has(e)&&(t._selectedFeatureIds["delete"](e),t._selectedSinceLastFlush["delete"](e),t._deselectedSinceLastFlush.add(e))}),this},a.prototype.clearSelected=function(){return this.deselect(this._selectedFeatureIds.values()),this},a.prototype.setSelected=function(e){var t=this;return e=i(e),this.deselect(this._selectedFeatureIds.values().filter(function(t){return-1===e.indexOf(t)})),this.select(e.filter(function(e){return!t._selectedFeatureIds.has(e)})),this},a.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},a.prototype.isSelected=function(e){return this._selectedFeatureIds.has(e)},a.prototype.flushSelected=function(){var e=this._selectedSinceLastFlush.values(),t=this._deselectedSinceLastFlush.values();return this._selectedSinceLastFlush.clear(),this._deselectedSinceLastFlush.clear(),{selected:e,deselected:t}}},{"./lib/simple_set":35,"./lib/throttle":38,"./lib/to_dense_array":39,"./render":47}],50:[function(e,t,n){"use strict";var r=e("./lib/types"),i=e("./lib/create_control_button");t.exports=function(e){var t={},n={mode:null,feature:null,mouse:null},o={mode:null,feature:null,mouse:null},s=["mode","feature","mouse"],a=function(){if(e.container){var t=[],r=[],i=[];o.feature="none"===o.mouse?null:o.feature,s.forEach(function(e){i.push(e+"-"+o[e]),o[e]!==n[e]&&(t.push(e+"-"+n[e]),null!==o[e]&&r.push(e+"-"+o[e]))}),t.length&&(e.container.classList.remove.apply(e.container.classList,t),e.container.classList.add.apply(e.container.classList,r)),s.forEach(function(e){n[e]=o[e]})}};e.ui={setClass:function(e){s.forEach(function(t){e[t]&&(o[t]=e[t])})},fireClassUpdate:function(){var e=Object.keys(o).some(function(e){return n[e]!==o[e]});e&&a()},addButtons:function(){var n=e.options.controls,o="mapboxgl-ctrl-";switch(e.options.position){case"top-left":case"top-right":case"bottom-left":case"bottom-right":o+=e.options.position;break;default:o+="top-left"}var s=e.container.getElementsByClassName(o)[0],a=s.getElementsByClassName("mapboxgl-ctrl-group")[0];if(!a){a=document.createElement("div"),a.className="mapboxgl-ctrl-group mapboxgl-ctrl";var c=s.getElementsByClassName("mapboxgl-ctrl-attrib")[0];c?s.insertBefore(a,c):s.appendChild(a)}n[r.LINE]&&(t[r.LINE]=i({container:a,className:"mapbox-gl-draw_line",title:"LineString tool "+(e.options.keybindings&&"(l)"),onActivate:function(){return e.api.changeMode("draw_line_string")}})),n[r.POLYGON]&&(t[r.POLYGON]=i({container:a,className:"mapbox-gl-draw_polygon",title:"Polygon tool "+(e.options.keybindings&&"(p)"),onActivate:function(){return e.api.changeMode("draw_polygon")}})),n[r.POINT]&&(t[r.POINT]=i({container:a,className:"mapbox-gl-draw_point",title:"Marker tool "+(e.options.keybindings&&"(m)"),onActivate:function(){return e.api.changeMode("draw_point")}})),n.trash&&(t.trash=i({container:a,className:"mapbox-gl-draw_trash",title:"Delete",onActivate:function(){e.api.trash(),e.ui.setButtonInactive("trash")}}))},setButtonActive:function(e){t[e]&&"trash"!==e&&t[e].classList.add("active")},setButtonInactive:function(e){t[e]&&t[e].classList.remove("active")},setAllInactive:function(){var e=Object.keys(t);e.forEach(function(e){if("trash"!==e){var n=t[e];n.classList.remove("active")}})},removeButtons:function(){var e=Object.keys(t);e.forEach(function(e){var n=t[e];n.parentNode&&n.parentNode.removeChild(n),t[e]=null})}}}},{"./lib/create_control_button":22,"./lib/types":40}]},{},[1]);
